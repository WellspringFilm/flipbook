<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wellspring Magazine</title>

  <style>
    /* Prevent any scrolling INSIDE the iframe document */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: transparent;
      overflow: hidden !important;           /* â›” no inner scrollbars */
      overscroll-behavior: none;
    }

    /* Stage: locks content to viewport and clips any overflow during flip */
    #stage {
      position: fixed;                        /* lock to iframe viewport */
      inset: 0;                               /* top/right/bottom/left = 0 */
      overflow: hidden;                       /* hard-clip overflow */
      display: flex;
      justify-content: center;                /* center horizontally */
      align-items: flex-start;                /* top align (removes big top gap) */
      background: transparent;
    }

    * { box-sizing: border-box; }

    #magazine {
      background: transparent;
      touch-action: manipulation;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
    }

    #magazine div {
      width: 100%;
      height: 100%;
      background-size: cover;                 /* keeps flip alignment */
      background-position: center;
      background-repeat: no-repeat;
    }
  </style>
</head>
<body>

  <div id="stage">
    <div id="magazine">
      <div style="background-image: url('https://cdn.prod.website-files.com/683ded281baf276371786e59/68effd0a4639237f70a27ef5_Cover.png');"></div>
      <div style="background-image: url('https://cdn.prod.website-files.com/683ded281baf276371786e59/68f12f21d9de04eb61dc36d4_Page%202%20Nuromax%20Ad.png');"></div>
      <div style="background-image: url('https://cdn.prod.website-files.com/683ded281baf276371786e59/68f149e01cfe72aba9f0e4a5_Page%203%20Synopsis.png');"></div>
      <div style="background-image: url('https://cdn.prod.website-files.com/683ded281baf276371786e59/68598bdd374c17b58d2a1130_Harvest%20Fest%201.png');"></div>
      <div style="background-image: url('https://cdn.prod.website-files.com/683ded281baf276371786e59/68598bdd422594a035806553_Harvest%20Fest%202.png');"></div>
      <div style="background-image: url('https://cdn.prod.website-files.com/683ded281baf276371786e59/68598bdd374c17b58d2a1133_Center%20Fold%201.png');"></div>
      <div style="background-image: url('https://cdn.prod.website-files.com/683ded281baf276371786e59/68598bddfd8f1f01f95d085f_Center%20Fold%202.png');"></div>
      <div style="background-image: url('https://cdn.prod.website-files.com/683ded281baf276371786e59/68598bddd096aa716bedf14d_Nuromax%20Artical%201.png');"></div>
      <div style="background-image: url('https://cdn.prod.website-files.com/683ded281baf276371786e59/68598bdd8d06788c221f2738_Nuromax%20Artical%202.png');"></div>
    </div>
  </div>

  <!-- Local copies sitting in your repo root -->
  <script src="jquery-3.7.1.min.js"></script>
  <script src="turn.js"></script>

  <script>
    $(function () {
      const magazine = $('#magazine');
      let lastMode = window.innerWidth >= 768 ? 'desktop' : 'mobile';

      function setupFlipbook(mode) {
        if (magazine.data('turn')) {
          magazine.turn('destroy').removeClass('turnjs');
        }

        if (mode === 'mobile') {
          // Fixed single page size on mobile
          magazine.css({ width: '300px', height: '450px' });
          magazine.turn({
            width: 300,
            height: 450,
            display: 'single',
            autoCenter: true,
            acceleration: true,
            gradients: true,
            elevation: 50
          });
        } else {
          // Responsive double spread on desktop
          const aspect = 4 / 3;
          let ww = Math.min(window.innerWidth * 0.95, 1400);
          let wh = window.innerHeight * 0.85;
          let w = ww;
          let h = w / aspect;
          if (h > wh) { h = wh; w = h * aspect; }

          magazine.css({ width: w + 'px', height: h + 'px' });
          magazine.turn({
            width: w,
            height: h,
            display: 'double',
            autoCenter: true,
            acceleration: true,
            gradients: true,
            elevation: 50
          });
        }
      }

      setupFlipbook(lastMode);

      // Keyboard nav
      $(window).on('keydown', function (e) {
        if (e.keyCode === 37) magazine.turn('previous');
        else if (e.keyCode === 39) magazine.turn('next');
      });

      // Reload only when crossing the mobile/desktop breakpoint
      $(window).on('resize', function () {
        const currentMode = window.innerWidth >= 768 ? 'desktop' : 'mobile';
        if (currentMode !== lastMode) location.reload();
      });

      // Click anywhere to flip: left = prev, right = next
      magazine.on('click', function (e) {
        const x = e.pageX - magazine.offset().left;
        const midpoint = magazine.width() / 2;
        if (x < midpoint) magazine.turn('previous');
        else magazine.turn('next');
      });
    });
  </script>

</body>
</html>
